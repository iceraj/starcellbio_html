// This file was automatically generated from microscopy.soy.
// Please don't edit this file by hand.

if (typeof scb_microscopy == 'undefined') { var scb_microscopy = {}; }


scb_microscopy.main = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'scb_s_microscopy_view\' >');
  scb_homepage.display_header(opt_data, output);
  scb_common.assignment_step({step: 6, last_step: opt_data.last_step, prev_step: opt_data.prev_step, assignment_name: opt_data.assignment.name, experiment_name: opt_data.experiment.name, assignment: opt_data.assignment, experiment: opt_data.experiment, technique_name: 'MICROSCOPY', technique_view: 'microscopy', technique_param: 'microscopy_id', technique_id: opt_data.microscopy.id}, output);
  scb_microscopy.display_details(opt_data, output);
  scb_homepage.display_footer({global_template: opt_data.t, assignment: opt_data.assignment}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


scb_microscopy.display_details = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'scb_s_microscopy_container\' role=\'main\'><div class=\'scb_microscopy_details_view\'>');
  scb_common.experiment_step({step: 7, last_step: 6, assignment: opt_data.assignment, experiment: opt_data.experiment}, output);
  output.append('<div class=\'scb_s_microscopy_all_tabs\'><div class=\'scb_microscopy_details_view_inner\'>');
  scb_microscopy.display_tabs(opt_data, output);
  output.append('</div></div></div></div>');
  return opt_sb ? '' : output.toString();
};


scb_microscopy.display_tabs = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="scb_s_microscopy_tab_content ', (opt_data.kind == 'sample_prep') ? 'scb_s_microscopy_tab_content_sample_prep' : '', '"  role=\'tabpanel\'>');
  scb_microscopy.display_tabs_selector(opt_data, output);
  if (opt_data.kind == 'sample_prep') {
    scb_microscopy.sample_prep(opt_data, output);
    output.append('</div>');
  }
  if (opt_data.kind == 'prepare_slide') {
    scb_microscopy.prepare_slide(opt_data, output);
    output.append('</div>');
  }
  output.append('<a class="scb_s_navigation_button scb_f_open_select_technique scb_s_select_technique_at_microscopy" href="#view=select_technique&assignment_id=', soy.$$escapeHtml(opt_data.assignment.id), '&experiment_id=', soy.$$escapeHtml(opt_data.experiment.id), '" assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' role=\'button\'>&#9664; SELECT TECHNIQUE</a>');
  return opt_sb ? '' : output.toString();
};


scb_microscopy.display_tabs_selector = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\' ', (opt_data.experiment.microscopy_list.list.length >= 5) ? ' scb_s_microscopy_tabs_more ' : ' scb_s_microscopy_tabs', ' \' role=\'tablist\'>');
  if (opt_data.experiment.microscopy_list.list.length < 5) {
    var mList96 = opt_data.experiment.microscopy_list.list;
    var mListLen96 = mList96.length;
    for (var mIndex96 = 0; mIndex96 < mListLen96; mIndex96++) {
      var mData96 = mList96[mIndex96];
      output.append((opt_data.microscopy.id == mData96.id) ? '<span class=\'scb_s_microscopy_active\' role=\'tab\'><span class=\'scb_s_microscopy_selected\' microscopy_id=\'' + soy.$$escapeHtml(mData96.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' contenteditable="true">' + soy.$$escapeHtml(mData96.name) + '</span><button class=\'scb_s_microscopy_remove scb_f_microscopy_remove\' microscopy_id=\'' + soy.$$escapeHtml(mData96.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' role=\'button\'>| &#215;</button ></span>' : '<a class=\'scb_f_open_microscopy scb_s_microscopy_open_microscopy\' role=\'tab\' href=\'#view=microscopy&experiment_id=' + soy.$$escapeHtml(opt_data.experiment.id) + '&assignment_id=' + soy.$$escapeHtml(opt_data.assignment.id) + '&microscopy_id=' + soy.$$escapeHtml(mData96.id) + '\' microscopy_id=\'' + soy.$$escapeHtml(mData96.id) + '\'>' + soy.$$escapeHtml(mData96.name) + '</a>');
    }
    output.append('<span class=\'scb_s_microscopy_add_microscopy\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' role=\'tab\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' microscopy_id=\'', soy.$$escapeHtml(opt_data.experiment.microscopy_list.list[opt_data.experiment.microscopy_list.list.length - 1].id), '\'><a class=\'scb_f_open_microscopy scb_s_microscopy_open_microscopy\' href=\'#view=microscopy&experiment_id=', soy.$$escapeHtml(opt_data.experiment.id), '&assignment_id=', soy.$$escapeHtml(opt_data.assignment.id), '\' role=\'presentation\'>ADD<span class=\'scb_s_microscopy_add_cross_microscopy\'>| + </span></a></span>');
  } else {
    output.append('<button class=\'scb_s_microscopy_left_microscopy\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\'  role=\'button\'  aria-label=\'Previous Tab\'></button>');
    if (opt_data.experiment.microscopy_list.list.length - 1 == opt_data.experiment.microscopy_list.start_tabs_index + 3) {
      var mList148 = opt_data.experiment.microscopy_list.list;
      var mListLen148 = mList148.length;
      for (var mIndex148 = 0; mIndex148 < mListLen148; mIndex148++) {
        var mData148 = mList148[mIndex148];
        output.append((mIndex148 >= opt_data.experiment.microscopy_list.start_tabs_index && mIndex148 < opt_data.experiment.microscopy_list.start_tabs_index + 4) ? (opt_data.microscopy.id == mData148.id) ? '<span class=\'scb_s_microscopy_active\' role=\'tab\'><input role=\'input\' class=\'scb_s_microscopy_selected\' facs_id=\'' + soy.$$escapeHtml(mData148.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' value=\'' + soy.$$escapeHtml(mData148.name) + '\' type=\'text\' maxlength=10></input><button class=\'scb_s_microscopy_remove scb_f_microscopy_remove\' microscopy_id=\'' + soy.$$escapeHtml(mData148.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\'  role=\'button\'>| &#215;</button></span>' : '<a class=\'scb_f_open_microscopy scb_s_microscopy_open_microscopy\' role=\'tab\' href=\'#view=microscopy&experiment_id=' + soy.$$escapeHtml(opt_data.experiment.id) + '&assignment_id=' + soy.$$escapeHtml(opt_data.assignment.id) + '&microscopy_id=' + soy.$$escapeHtml(mData148.id) + '\' microscopy_id=\'' + soy.$$escapeHtml(mData148.id) + '\'>' + soy.$$escapeHtml(mData148.name) + '</a>' : '');
      }
      output.append('<span class=\'scb_s_microscopy_add_microscopy\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' role=\'tab\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' microscopy_id=\'', soy.$$escapeHtml(opt_data.experiment.microscopy_list.list[opt_data.experiment.microscopy_list.list.length - 1].id), '\'><a class=\'scb_f_open_microscopy scb_s_microscopy_open_microscopy\' href=\'#view=microscopy&experiment_id=', soy.$$escapeHtml(opt_data.experiment.id), '&assignment_id=', soy.$$escapeHtml(opt_data.assignment.id), '\' role=\'presentation\'>ADD<span class=\'scb_s_microscopy_add_cross_microscopy\'>| + </span></a></span>');
    } else {
      var mList193 = opt_data.experiment.microscopy_list.list;
      var mListLen193 = mList193.length;
      for (var mIndex193 = 0; mIndex193 < mListLen193; mIndex193++) {
        var mData193 = mList193[mIndex193];
        output.append((mIndex193 >= opt_data.experiment.microscopy_list.start_tabs_index && mIndex193 < opt_data.experiment.microscopy_list.start_tabs_index + 5) ? (opt_data.microscopy.id == mData193.id) ? '<span class=\'scb_s_microscopy_active\' role=\'tab\'><input role=\'input\' class=\'scb_s_microscopy_selected\' facs_id=\'' + soy.$$escapeHtml(mData193.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' value=\'' + soy.$$escapeHtml(mData193.name) + '\' type=\'text\' maxlength=10></input><button class=\'scb_s_microscopy_remove scb_f_microscopy_remove\' microscopy_id=\'' + soy.$$escapeHtml(mData193.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\'  role=\'button\'>| &#215;</button></span>' : '<a class=\'scb_f_open_microscopy scb_s_microscopy_open_microscopy\' role=\'tab\' href=\'#view=microscopy&experiment_id=' + soy.$$escapeHtml(opt_data.experiment.id) + '&assignment_id=' + soy.$$escapeHtml(opt_data.assignment.id) + '&microscopy_id=' + soy.$$escapeHtml(mData193.id) + '\' microscopy_id=\'' + soy.$$escapeHtml(mData193.id) + '\'>' + soy.$$escapeHtml(mData193.name) + '</a>' : '');
      }
    }
    output.append('<button class=\'scb_s_microscopy_right_microscopy\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\'  role=\'button\'  aria-label=\'Next Tab\'></button>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


scb_microscopy.sample_prep = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  scb_microscopy.display_m_progress({step: 1}, output);
  output.append('<div class = \'scb_s_microscopy_slide_prep_instructions\'><ul class=\'scb_s_experiment_setup_list\'><li>To prepare a sample for microscopy, click the checkbox to the left of each sample name or click <b>SELECT ALL</b> to select all samples.</li><li>Select the type of microscopy analysis you would like to perform by selecting the appropriate Microscopy Analysis and Conditions, when appropriate.</li><li>Note: The microscopy experimental technique in StarCellBio draws upon real microscopy images. Not all slide types and conditions may be available for each sample in your experiment.</li></ul></div><div class=\'scb_s_microscopy_samples_container\' ><div class=\'scb_s_western_blot_samples_table\'  ><table role=\'grid\'><thead class=\'scb_s_microscopy_samples_table_head\'><td  role=\'columnheader\' class=\'scb_s_microscopy_samples_table_heading m_sample_prep_select scb_s_experiment_setup_table_border\'>Select</td><td  role=\'columnheader\' class=\'scb_s_microscopy_samples_table_heading m_sample_prep_samples scb_s_experiment_setup_table_border\'>Samples</td><td  role=\'columnheader\' class=\'scb_s_microscopy_samples_table_heading m_sample_prep_lysate scb_s_experiment_setup_table_border\'>Microscopy Analysis<button class=\'scb_f_info_icon scb_s_microscopy_slide_type_info\' note=\'scb_f_microscopy_slide_type_followup\' role=\'button\' aria-label=\'Slide Type Info\'> </button><div class=\'scb_f_microscopy_slide_type_followup scb_f_controls_note\' role=\'note\'>Antibody-labeling Immunohistochemistry (IHC) uses a series of antibodies to specifically detect a protein of interest using a colorimetric reaction. Antibody-labeling Immunofluorescence (IF) uses a series of antibodies, including a fluorescently-labeled secondary antibody, to specifically detect the protein(s) of interest. &nbsp;<a href="static/ref_lib/full_library.html#MicroscopySamplePrep" target=\'_blank\' class=\'scb_s_select_technique_learn_more \'>Learn more &gt;&gt;</a></div></td><td role=\'columnheader\' class=\'scb_s_microscopy_samples_table_heading m_sample_prep_blank scb_s_experiment_setup_table_border\'>Conditions</td></thead>');
  var rList238 = opt_data.rows;
  var rListLen238 = rList238.length;
  for (var rIndex238 = 0; rIndex238 < rListLen238; rIndex238++) {
    var rData238 = rList238[rIndex238];
    output.append('<tr  role=\'row\'  class=\'scb_s_microscopy_samples_table_tr ', (rData238.display_sample) ? ' scb_s_microscopy_row_border' : '', '\'><td class=\'scb_s_microscopy_sample_checkbox scb_s_microscopy_samples_table_td ', (rData238.display_sample) ? '' : 'scb_s_experiment_setup_table_border', '\' >', (rData238.display_sample) ? (rData238.cell_treatment.treatment_list.list[0].microscope[0] == 'na') ? '' : '<input type="checkbox" class="scb_f_microscopy_sample_active" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' aria-checked=\'' + ((rData238.is_sample_enabled) ? 'true' : 'false') + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\'' + ((rData238.is_sample_enabled) ? 'checked="checked"' : '') + '>' : '', '</td><td class=\'scb_s_microscopy_sample_name scb_s_microscopy_samples_table_td ', (rData238.display_sample) ? '' : 'scb_s_experiment_setup_table_border', '\' >', (rData238.display_sample) ? soy.$$escapeHtml(rData238.display_text) : '', '</td><td class=\'scb_s_microscopy_sample_type scb_s_microscopy_samples_table_td ', (rData238.display_sample) ? '' : 'scb_s_experiment_setup_table_border', '\'>');
    scb_microscopy.display_slide_types({assignment: opt_data.assignment, experiment: opt_data.experiment, microscopy: opt_data.microscopy, cell_treatment: rData238.cell_treatment, kinds: opt_data.kinds, lane: rData238}, output);
    output.append('</td><td class=\' scb_s_microscopy_samples_table_td ', (rData238.display_sample) ? '' : 'scb_s_experiment_setup_table_border', ' scb_s_microscopy_conditions\'>');
    if (rData238.lane) {
      if (opt_data.assignment.template.model.microscopy.is_ab) {
        var kList305 = soy.$$getMapKeys(opt_data.assignment.template.micro_kinds[rData238.lane.kind].conditions);
        var kListLen305 = kList305.length;
        for (var kIndex305 = 0; kIndex305 < kListLen305; kIndex305++) {
          var kData305 = kList305[kIndex305];
          output.append((opt_data.assignment.template.micro_kinds[rData238.lane.kind].conditions[kData305].identifiers[rData238.lane.cell_treatment.identifier]) ? '<input class=\'scb_f_microscopy_select_conditions\' type="radio" name="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '" value="' + soy.$$escapeHtml(kData305) + '" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && rData238.lane.slide_conditions == kData305) ? 'checked=\'checked\'' : '') + '/><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds[rData238.lane.kind].conditions[kData305].name) + '</span>&nbsp;&nbsp;' : '');
        }
      }
      if (rData238.lane.kind == 'IHC') {
        var kList338 = soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]);
        var kListLen338 = kList338.length;
        for (var kIndex338 = 0; kIndex338 < kListLen338; kIndex338++) {
          var kData338 = kList338[kIndex338];
          output.append('<div>', (kData338 == 'secondary') ? '<input class=\'scb_f_microscopy_select_conditions\' type="radio" name="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '" value="secondary" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'secondary' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked=\'checked\'' : '') + '/><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IHC.conditions.secondary.name) + '</span>&nbsp;&nbsp;' : (kData338 == 'ki67') ? '<input class=\'scb_f_microscopy_select_conditions\' type="radio" name="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '" value="ki67" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'ki67' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked=\'checked\'' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IHC.conditions.ki67.name) + '</span>&nbsp;' : (kData338 == 'cgrp') ? '<input class=\'scb_f_microscopy_select_conditions\' type="radio" name="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '" value="cgrp" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'cgrp' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked=\'checked\'' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IHC.conditions.cgrp.name) + '</span>&nbsp;' : (kData338 == 'NFIB') ? '<input class=\'scb_f_microscopy_select_conditions\' type="radio" name="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '" value="NFIB" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'NFIB' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked=\'checked\'' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IHC.conditions.NFIB.name) + '</span>' : '', '</div>');
        }
      } else if (opt_data.assignment.id == 'assignment_706_2014') {
        output.append('<div><input class="scb_f_microscopy_select_conditions ', (rData238.is_sample_enabled) ? '' : 'scb_s_microscopy_dim_conditions', '" microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' type="radio" value="rgb" cell_treatment_id=\'', soy.$$escapeHtml(rData238.cell_treatment.id), '\' lane_kind="', soy.$$escapeHtml(rData238.kind), '" lane_id="', (rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '', '"', (rData238.is_sample_enabled && soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1) ? 'checked="checked"' : '', ' /><span class="scb_s_western_blot_choose_gel_type_input_text ', (rData238.is_sample_enabled) ? '' : 'scb_s_microscopy_dim_conditions', '">', soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.rgb.name), '</span></div>');
      } else if (rData238.lane.kind == 'IF' && ! (opt_data.assignment.id == 'assignment_706_2014')) {
        if (! (opt_data.assignment.id == 'assignment_706_2014_ps2')) {
          var kList482 = soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]);
          var kListLen482 = kList482.length;
          for (var kIndex482 = 0; kIndex482 < kListLen482; kIndex482++) {
            var kData482 = kList482[kIndex482];
            output.append('<div>', (! (opt_data.assignment.id == 'assignment_706_2014')) ? (kData482 == 'rgb') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="rgb" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'rgb' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.rgb.name) + '</span>' : (kData482 == 'g') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="g" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'g' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.g.name) + '</span>' : (kData482 == 'gr') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="gr" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'gr' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.gr.name) + '</span>' : (kData482 == 'rb') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="rb" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'rb' || soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.rb.name) + '</span>' : '' : '', '</div>');
          }
        } else {
          var kList578 = rData238.lane.cell_treatment.treatment_list.first.microscope;
          var kListLen578 = kList578.length;
          for (var kIndex578 = 0; kIndex578 < kListLen578; kIndex578++) {
            var kData578 = kList578[kIndex578];
            output.append('<div>', (! (opt_data.assignment.id == 'assignment_706_2014')) ? ((kData578 == 'rgb') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="rgb" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'rgb' || soy.$$getMapKeys(rData238.lane.cell_treatment.treatment_list.first.microscope).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.rgb.name) + '</span>' : '') + ((kData578 == 'g') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="g" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'g' || soy.$$getMapKeys(rData238.lane.cell_treatment.treatment_list.first.microscope).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.g.name) + '</span>' : '') + ((kData578 == 'gr') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="gr" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'gr' || soy.$$getMapKeys(rData238.lane.cell_treatment.treatment_list.first.microscope).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.gr.name) + '</span>' : '') + ((kData578 == 'rb') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="rb" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && (rData238.lane.slide_conditions == 'rb' || soy.$$getMapKeys(rData238.lane.cell_treatment.treatment_list.first.microscope).length == 1)) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.rb.name) + '</span>' : '') : '', '</div>');
          }
        }
      } else if (rData238.lane.kind == 'Dye') {
        var kList677 = soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]);
        var kListLen677 = kList677.length;
        for (var kIndex677 = 0; kIndex677 < kListLen677; kIndex677++) {
          var kData677 = kList677[kIndex677];
          output.append('<div>', (kData677 == 'HnE') ? '<input class="scb_f_microscopy_select_conditions" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' type="radio" value="HnE" cell_treatment_id=\'' + soy.$$escapeHtml(rData238.cell_treatment.id) + '\' lane_kind="' + soy.$$escapeHtml(rData238.kind) + '" lane_id="' + ((rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '') + '"' + ((rData238.is_sample_enabled && soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1) ? 'checked="checked"' : '') + ' /><span class="scb_s_western_blot_choose_gel_type_input_text ">' + soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.Dye.conditions.HnE.name) + '</span>' : '', '</div>');
        }
      }
    } else if (opt_data.assignment.id == 'assignment_706_2014' && ! (rData238.kind == 'placeholder')) {
      output.append('<div><input class="scb_f_microscopy_select_conditions ', (rData238.is_sample_enabled) ? '' : 'scb_s_microscopy_dim_conditions', '" microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' type="radio" value="rgb" cell_treatment_id=\'', soy.$$escapeHtml(rData238.cell_treatment.id), '\' lane_kind="', soy.$$escapeHtml(rData238.kind), '" lane_id="', (rData238.kind == 'existing') ? soy.$$escapeHtml(rData238.lane.id) : '', '"', (rData238.is_sample_enabled && soy.$$getMapKeys(opt_data.assignment.template.slide_parser[rData238.lane.cell_treatment.treatment_list.first.collection_id][rData238.lane.kind]).length == 1) ? 'checked="checked"' : '', ' /><span class="scb_s_western_blot_choose_gel_type_input_text scb_s_microscopy_dim_conditions">', soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.rgb.name), '</span></div>');
    }
    output.append('</td><td class=\'scb_s_microscopy_samples_table_td ', (rData238.display_sample) ? '' : 'scb_s_experiment_setup_table_border', '\'>', (rData238.kind == 'existing') ? '<button class="scb_f_microscopy_sample_remove" microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' lane_id=\'' + soy.$$escapeHtml(rData238.lane.id) + '\'' + ((rData238.is_sample_enabled) ? '' : 'disabled="disabled"') + '><img alt="Delete" title="Delete" src="images/setup/scb_remove.png"></button>' : '', '</td></tr>');
  }
  output.append((opt_data.rows.length >= 10) ? '<tr role=\'row\'  class=\'scb_s_microscopy_samples_select_all_rel\'><td class=\'scb_f_microscopy_sample_active_all_td\' colspan=\'2\'><button class=\'scb_f_microscopy_sample_active_all\' role=\'button\'  aria-label=\'Select All\'>SELECT ALL</button></td><td class=\'scb_f_microscopy_sample_inactive_all_td\' colspan=\'2\' align=\'right\'><button class=\'scb_f_microscopy_sample_inactive_all\' role=\'button\'  aria-label=\'Clear All\' >CLEAR ALL</button></td></tr>' : '<tr role=\'row\'  class=\'scb_s_microscopy_samples_select_all_abs\'><td colspan=\'1\'><button class=\'scb_f_microscopy_sample_active_all\' role=\'button\' aria-label=\'Select All\'>SELECT ALL</button></td><td colspan=\'1\' class=\'scb_s_microscopy_blank_space1\'></td><td colspan=\'1\'><button class=\'scb_f_microscopy_sample_inactive_all\' role=\'button\' aria-label=\'Clear All\'>CLEAR ALL</button></td><td colspan=\'1\'> &nbsp;</td></tr>', '</table></div>', (opt_data.rows.length >= 10) ? '<div class="scb_s_western_blot_green_line" role=\'presentation\'></div>' : '', '</div></div><a class=\'scb_s_navigation_button scb_f_microscopy_prepare_slides\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\'', (opt_data.can_prepare_slide) ? '' : 'disabled=\'disabled\'', ' role=\'button\'> PREPARE SLIDES  &nbsp; &#9654;</a>');
  return opt_sb ? '' : output.toString();
};


scb_microscopy.prepare_slide = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'scb_s_microscopy_tab_content_slide\'>');
  if (opt_data.microscopy.samples_finished) {
    scb_microscopy.display_m_progress({step: 3}, output);
  } else {
    scb_microscopy.display_m_progress({step: 2}, output);
  }
  output.append('<div class = \'scb_s_microscopy_prepare_slide_instructions\'><ul class=\'scb_s_experiment_setup_list\'><li>Note: Not all microscope controls will be relevant for each image.</li><li>Once you have manipulated the microscope controls, they will be automatically saved when navigating away from the image.</li></ul></div><div class=\'scb_s_microscopy_samples_area\'><div class=\'scb_s_microscopy_samples_heading\'>Samples', (opt_data.microscopy.samples_finished) ? '<button class=\'scb_f_microscopy_tools_toggle scb_s_microscopy_tools_samples_followup_toggle\' role=\'button\' aria-label=\'Samples Info\' note=\'scb_s_microscopy_tools_samples_followup\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\'></button><div class=\'scb_s_microscopy_tools_samples_followup ' + ((opt_data.microscopy.samples_show_state) ? '' : 'scb_s_hidden_note') + '\' role=\'note\'><button class=\'scb_f_microscopy_note_close_button\' aria-label=\'Close\' role=\'button\' note=\'scb_s_microscopy_tools_samples_followup\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\'><span>&#215;</span></button>To view the sample on the microscope, select the sample name from the Samples window. Then at the right, select the tab that represents the appropriate type of microscopy analysis.</div>' : '', '</div><div class=\'', (opt_data.microscopy.samples_finished) ? ' scb_s_microscopy_choose_samples_order_no_border' : 'scb_s_microscopy_choose_samples_order', '\'><ol role=\'list\' class=\'scb_s_microscopy_choose_samples_order_list\' >');
  var rList814 = opt_data.rows;
  var rListLen814 = rList814.length;
  for (var rIndex814 = 0; rIndex814 < rListLen814; rIndex814++) {
    var rData814 = rList814[rIndex814];
    output.append((rData814.is_valid) ? (rData814.index == 0) ? '<li role=\'listitem\' microscopy_lane_id=\'' + soy.$$escapeHtml(rData814.lane.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' lane_kind = \'' + soy.$$escapeHtml(rData814.lane.kind) + '\' slide_conditions = \'' + soy.$$escapeHtml(rData814.lane.slide_conditions) + '\' title=\'' + soy.$$escapeHtml(rData814.display_text) + ' \'' + ((opt_data.microscopy.selected_lane && rData814.cell_treatment.id == opt_data.microscopy.selected_lane.cell_treatment_id) ? 'class=\'scb_s_microscopy_sample_selected\'' : '') + '>&nbsp;&nbsp;' + soy.$$escapeHtml(rData814.display_text) + '</li>' : '' : '');
  }
  output.append('</ol></div>', (opt_data.microscopy.samples_finished) ? '' : '<button class=\'scb_f_microscopy_load_slides scb_s_navigation_button\' microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id="' + soy.$$escapeHtml(opt_data.assignment.id) + '" role=\'button\' experiment_id="' + soy.$$escapeHtml(opt_data.experiment.id) + '">LOAD</button>', '</div><div class=\'scb_s_microscopy_samples_slide_area ', (opt_data.microscopy.samples_finished) ? '' : 'scb_s_microscopy_lens_controls_disabled', '\'><div class=\'scb_s_western_blot_gel_tabs\' role=\'tablist\'>');
  if (opt_data.microscopy.samples_finished) {
    var rList860 = opt_data.rows;
    var rListLen860 = rList860.length;
    for (var rIndex860 = 0; rIndex860 < rListLen860; rIndex860++) {
      var rData860 = rList860[rIndex860];
      output.append((rData860.is_valid && rData860.lane.id == opt_data.microscopy.selected_lane.id) ? '<span class=\'scb_s_western_blot_gel_active scb_s_microscopy_slide_tab \' role=\'tab\'><div class=\'scb_s_microscopy_gel_tab_selected\'>' + soy.$$escapeHtml(opt_data.microscopy.selected_lane.kinds[opt_data.microscopy.selected_lane.kind].conditions[opt_data.microscopy.selected_lane.slide_conditions].short_name) + '</div></span>' : (rData860.is_valid && rData860.cell_treatment.id == opt_data.microscopy.selected_lane.cell_treatment_id) ? '<div class=\'scb_s_microscopy_slide_tab\' microscopy_id=\'' + soy.$$escapeHtml(opt_data.microscopy.id) + '\' assignment_id=\'' + soy.$$escapeHtml(opt_data.assignment.id) + '\' role=\'tab\' experiment_id=\'' + soy.$$escapeHtml(opt_data.experiment.id) + '\' microscopy_lane_id=\'' + soy.$$escapeHtml(rData860.lane.id) + '\'>' + soy.$$escapeHtml(rData860.lane.kinds[rData860.lane.kind].conditions[rData860.lane.slide_conditions].short_name) + '</div>' : '');
    }
  } else {
    output.append('<span class=\'scb_s_western_blot_gel_active scb_s_microscopy_slide_tab\'  role=\'tab\'><div class=\'scb_s_microscopy_gel_tab_selected\'>SLIDE</div></span>');
  }
  output.append('</div>');
  if (opt_data.microscopy.samples_finished) {
    var rList884 = opt_data.rows;
    var rListLen884 = rList884.length;
    for (var rIndex884 = 0; rIndex884 < rListLen884; rIndex884++) {
      var rData884 = rList884[rIndex884];
      if (rData884.is_valid && opt_data.microscopy.lane_selected == rData884.lane.id) {
        scb_microscopy.display_lens({assignment: opt_data.assignment, experiment: opt_data.experiment, microscopy: opt_data.microscopy, lane: rData884.lane, microscopy_line_id: opt_data.microscopy.lane_selected}, output);
      }
    }
  } else {
    scb_microscopy.display_lens({assignment: opt_data.assignment, experiment: opt_data.experiment, microscopy: opt_data.microscopy, lane: false, microscopy_line_id: opt_data.microscopy.lane_selected}, output);
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


scb_microscopy.display_lens = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'scb_s_microscopy_load_followup scb_s_controls_note\' role=\'note\'><button class=\'scb_f_controls_close_button\' aria-label=\'Close\' role=\'button\'><span>&#215;</span></button>Your slides have been loaded. Every time you switch samples, the chosen slide will be automatically loaded. <p/>Click the appropriate navigation arrows, use the arrows on your keyboard, or click and drag your mouse to move the microscope lens across the image.<p/>', (opt_data.microscopy.disable_blur && opt_data.microscopy.disable_brightness) ? 'Please note that the brightness and focus microscope controls have been disabled.' : (opt_data.microscopy.disable_blur) ? 'Please note that the focus microscope controls have been disabled.' : (opt_data.microscopy.disable_brightness) ? 'Please note that the brightness microscope controls have been disabled.' : '', '<div class=\'scb_s_microscope_status\'></div></div><div class=\'scb_s_microscopy_tools_navigation_followup ', (opt_data.microscopy.navigation_show_state) ? '' : 'scb_s_hidden_note', '\' role=\'note\'><button class=\'scb_f_microscopy_note_close_button\' aria-label=\'Close\' role=\'button\' note=\'scb_s_microscopy_tools_navigation_followup\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\'><span>&#215;</span></button>Click the appropriate navigation arrows, use the arrows on your keyboard, or click and drag your mouse to move the microscope lens across the image. For more information about the other microscope controls, see the user guide. &nbsp;<a href="static/ref_lib/full_library.html#MicroscopyAnalyze" target=\'_blank\' class=\'scb_s_select_technique_learn_more \'>Learn more &gt;&gt;</a></div><div class=\'scb_s_microscopy_slide_content\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\'', (opt_data.microscopy_line_id) ? 'microscopy_lane_id=\'' + soy.$$escapeHtml(opt_data.microscopy_line_id) + '\'' : '', '><div id=\'scb_s_microscopy_slide_content_lens_outline_', soy.$$escapeHtml(opt_data.microscopy_line_id), '\' class=\'scb_s_microscopy_slide_content_lens_outline\' role=\'widget\' aria-label=\'Slide Lens, assistance needed to use\'></div><div id=\'scb_s_microscopy_lens_controls\' class=\'', (opt_data.microscopy.samples_finished) ? '' : 'scb_s_microscopy_lens_controls_disabled', '\'><div class = \'scb_s_microscopy_lens_controls_section_1\'><span class="scb_s_microscopy_title_label" role=\'heading\'>Microscope Controls</span><button class=\'scb_f_microscopy_tools_toggle scb_s_microscopy_tools_navigation_followup_toggle\'  note=\'scb_s_microscopy_tools_navigation_followup\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' role=\'button\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', ' ></button></div><div class = \'scb_s_microscopy_lens_controls_section_2\'><span class="scb_s_microscopy_lens_label" id=\'scb_s_light_label\' >Light:</span> <input aria-labelledby=\'scb_s_light_label\' type="checkbox" class="scb_f_microscopy_light ', (opt_data.microscopy.samples_finished) ? '' : 'scb_s_microscopy_switch_disabled', '" microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' ', (opt_data.microscopy_line_id) ? 'microscopy_lane_id=\'' + soy.$$escapeHtml(opt_data.microscopy_line_id) + '\'' : '', (opt_data.microscopy.light_on) ? 'checked=\'checked\'' : '', '   aria-checked=\'', (opt_data.microscopy.light_on) ? 'true' : 'false', '\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></div><div class = \'scb_s_microscopy_lens_controls_section_3\'><span class="scb_s_microscopy_brightness_label"></span><img class=\'scb_s_microscopy_black_icon\' src=\'images/microscopy/Brightness/Brightness_Dark.png\'/><img class=\'scb_s_microscopy_white_icon\' src=\'images/microscopy/Brightness/Brightness_Light.png\'/><button class =\'scb_s_micro_arrows\' id=\'brightdown\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button><div class=\'scb_s_microscopy_brightness_focus_middle\'>', (opt_data.microscopy.disable_brightness) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>' : (opt_data.microscopy.selected_lane && opt_data.microscopy.selected_lane.lens_map.brightness) ? ((opt_data.microscopy.selected_lane.lens_map.brightness > 0) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.1) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.2) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.3) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.4) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.5) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.6) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.7) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.8) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 0.9) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 1) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 2) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 3) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 4) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 5) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 6) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 7) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') + ((opt_data.microscopy.selected_lane.lens_map.brightness > 8) ? '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>' : '<img src = \'images/microscopy/Brightness/Brightness_Line_Gray.png\'/>') : '<img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/><img src = \'images/microscopy/Brightness/Brightness_Line_Green.png\'/>', '</div><button class =\'scb_s_micro_arrows\' id=\'brightup\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button></div><div class = \'scb_s_microscopy_lens_controls_section_4\'><span class="scb_s_microscopy_laser_label" id=\'scb_s_laser_label\'>Laser:</span><input type="checkbox" class="scb_f_microscopy_laser ', (opt_data.microscopy.samples_finished) ? '' : 'scb_s_microscopy_switch_disabled', '" aria-labelledby=\'scb_s_laser_label\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' aria-checked=\'', (opt_data.microscopy.laser_on) ? 'true' : 'false', '\' assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' ', (opt_data.microscopy_line_id) ? 'microscopy_lane_id=\'' + soy.$$escapeHtml(opt_data.microscopy_line_id) + '\'' : '', ' ', (opt_data.microscopy.laser_on) ? 'checked=\'checked\'' : '', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></div><div class = \'scb_s_microscopy_lens_controls_section_5\'><span class=\'scb_s_microscopy_filter_label\'>Filters:</span><input class=\'scb_f_microscopy_red scb_s_microscopy_if\' disabled=\'disabled\'  microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' title=\'Red\'  name=\'IF\' type="radio" assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' ', (opt_data.microscopy_line_id) ? 'microscopy_lane_id=\'' + soy.$$escapeHtml(opt_data.microscopy_line_id) + '\'' : '', ' ', (opt_data.microscopy.red_enabled) ? 'checked=\'checked\'' : '', ' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '><input class=\'scb_f_microscopy_blue scb_s_microscopy_if \' disabled=\'disabled\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' title=\'Blue\' name=\'IF\' type="radio" assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' ', (opt_data.microscopy_line_id) ? 'microscopy_lane_id=\'' + soy.$$escapeHtml(opt_data.microscopy_line_id) + '\'' : '', ' ', (opt_data.microscopy.blue_enabled) ? 'checked=\'checked\'' : '', ' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '><input class=\'scb_f_microscopy_green scb_s_microscopy_if\' disabled=\'disabled\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' title=\'Green\' name=\'IF\' type="radio" assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' ', (opt_data.microscopy_line_id) ? 'microscopy_lane_id=\'' + soy.$$escapeHtml(opt_data.microscopy_line_id) + '\'' : '', ' ', (opt_data.microscopy.green_enabled) ? 'checked=\'checked\'' : '', ' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '><input class=\'scb_f_microscopy_all scb_s_microscopy_if\' disabled=\'disabled\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\'  title=\'All\' name=\'IF\' type="radio" assignment_id=\'', soy.$$escapeHtml(opt_data.assignment.id), '\' experiment_id=\'', soy.$$escapeHtml(opt_data.experiment.id), '\' ', (opt_data.microscopy_line_id) ? 'microscopy_lane_id=\'' + soy.$$escapeHtml(opt_data.microscopy_line_id) + '\'' : '', ' ', (opt_data.microscopy.merge_enabled) ? 'checked=\'checked\'' : '', ' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '><br/><br/></div><div class = \'scb_s_microscopy_lens_controls_section_6\'><span class=\'scb_s_microscopy_focus_label\'>Focus:</span><button class =\'scb_s_micro_arrows\' id=\'fblurup\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button><img class=\'scb_s_microscopy_tight_focus_middle\' src = \'images/microscopy/Tight_Focus/Focus_Tight_Middle.png\'/><button class =\'scb_s_micro_arrows\' id=\'fblurdown\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button><img class=\'scb_s_microscopy_focus_knob\' src = \'images/microscopy/Focus_Knob.png\'/><button class =\'scb_s_micro_arrows\' id=\'blurup\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button><img class=\'scb_s_microscopy_rough_focus_middle\' src = \'images/microscopy/Loose_Focus/Focus_Loose_Middle.png\'/><button class =\'scb_s_micro_arrows\' id=\'blurdown\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button></div><div class = \'scb_s_microscopy_lens_controls_section_7\'><span class=\'scb_s_microscopy_obj_label\' id=\'scb_s_obj_label\' >Objective:</span> <span class=\'scb_s_microscopy_mag\' aria-labelledby=\'scb_s_obj_label\'></span><br/></div><button class =\'scb_s_micro_arrows\' id=\'up\' aria-label=\'Slide Up\' role=\'button\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', ' ></button><button class =\'scb_s_micro_arrows\' id=\'down\' aria-label=\'Slide Down\' role=\'button\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button><button class =\'scb_s_micro_arrows\' id=\'left\' aria-label=\'Slide Left\' role=\'button\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button><button class =\'scb_s_micro_arrows\' id=\'right\' aria-label=\'Slide Right\' role=\'button\' ', (opt_data.microscopy.samples_finished) ? '' : 'disabled', '></button></div></div>');
  return opt_sb ? '' : output.toString();
};


scb_microscopy.display_slide_types = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.assignment.template.model.microscopy.is_ab) {
    output.append('<select class="scb_f_microscopy_select_slide_type" cell_treatment_id=\'', soy.$$escapeHtml(opt_data.cell_treatment.id), '\' role=\'select\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id="', soy.$$escapeHtml(opt_data.assignment.id), '" experiment_id="', soy.$$escapeHtml(opt_data.experiment.id), '" lane_kind="', soy.$$escapeHtml(opt_data.lane.kind), '" lane_id="', (opt_data.lane.kind == 'existing') ? soy.$$escapeHtml(opt_data.lane.lane.id) : '', '"', (opt_data.lane.is_sample_enabled) ? '' : 'disabled="disabled"', '>', (opt_data.lane.kind != 'existing') ? '<option  role=\'option\' selected="selected" disabled="disabled" value=\'\'>Select Analysis</option>' : '');
    var kList1276 = soy.$$getMapKeys(opt_data.assignment.template.micro_kinds);
    var kListLen1276 = kList1276.length;
    for (var kIndex1276 = 0; kIndex1276 < kListLen1276; kIndex1276++) {
      var kData1276 = kList1276[kIndex1276];
      output.append((opt_data.assignment.template.micro_kinds[kData1276].identifiers[opt_data.lane.cell_treatment.identifier]) ? '<option value=\'' + soy.$$escapeHtml(kData1276) + '\' role=\'option\'' + ((opt_data.lane.kind == 'existing' && opt_data.lane.lane.kind == kData1276) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(opt_data.kinds[kData1276].name) + '</option>' : '');
    }
    output.append('</select>');
  } else {
    if (soy.$$getMapKeys(opt_data.kinds).length == 1 && soy.$$getMapKeys(opt_data.kinds.IF.conditions).length == 1) {
      var kList1293 = soy.$$getMapKeys(opt_data.kinds);
      var kListLen1293 = kList1293.length;
      for (var kIndex1293 = 0; kIndex1293 < kListLen1293; kIndex1293++) {
        var kData1293 = kList1293[kIndex1293];
        output.append('<span class="scb_f_microscopy_select_slide_type ', (opt_data.lane.is_sample_enabled) ? '' : 'scb_s_microscopy_dim_conditions', '" cell_treatment_id=\'', soy.$$escapeHtml(opt_data.cell_treatment.id), '\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id="', soy.$$escapeHtml(opt_data.assignment.id), '" experiment_id="', soy.$$escapeHtml(opt_data.experiment.id), '" value="', soy.$$escapeHtml(kData1293), '" lane_kind="', soy.$$escapeHtml(opt_data.lane.kind), '" lane_id="', (opt_data.lane.kind == 'existing') ? soy.$$escapeHtml(opt_data.lane.lane.id) : '', '">', soy.$$escapeHtml(opt_data.kinds[kData1293].name), '</span>');
      }
    } else if (opt_data.lane.cell_treatment.treatment_list.list[0].microscope.length == 1 && opt_data.lane.cell_treatment.treatment_list.list[0].microscope[0] == 'na') {
      output.append('<span class="scb_f_microscopy_select_slide_type" cell_treatment_id=\'', soy.$$escapeHtml(opt_data.cell_treatment.id), '\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id="', soy.$$escapeHtml(opt_data.assignment.id), '" experiment_id="', soy.$$escapeHtml(opt_data.experiment.id), '" value="IF" lane_kind="', soy.$$escapeHtml(opt_data.lane.kind), '" lane_id="', (opt_data.lane.kind == 'existing') ? soy.$$escapeHtml(opt_data.lane.lane.id) : '', '">', soy.$$escapeHtml(opt_data.assignment.template.micro_kinds.IF.conditions.na.name), '</span>');
    } else {
      output.append('<select class="scb_f_microscopy_select_slide_type" cell_treatment_id=\'', soy.$$escapeHtml(opt_data.cell_treatment.id), '\' role=\'select\' microscopy_id=\'', soy.$$escapeHtml(opt_data.microscopy.id), '\' assignment_id="', soy.$$escapeHtml(opt_data.assignment.id), '" experiment_id="', soy.$$escapeHtml(opt_data.experiment.id), '" lane_kind="', soy.$$escapeHtml(opt_data.lane.kind), '" lane_id="', (opt_data.lane.kind == 'existing') ? soy.$$escapeHtml(opt_data.lane.lane.id) : '', '"', (opt_data.lane.is_sample_enabled) ? '' : 'disabled="disabled"', '>');
      if (opt_data.lane.kind == 'existing') {
        if (opt_data.lane.cell_treatment.cell_line == opt_data.assignment.template.model.microscopy.valid[0] && opt_data.lane.cell_treatment.treatment_list.first.drug_list.list[0].drug_id == opt_data.assignment.template.model.microscopy.valid[1]) {
          var kList1362 = soy.$$getMapKeys(opt_data.assignment.template.slide_parser[opt_data.lane.cell_treatment.treatment_list.first.collection_id]);
          var kListLen1362 = kList1362.length;
          for (var kIndex1362 = 0; kIndex1362 < kListLen1362; kIndex1362++) {
            var kData1362 = kList1362[kIndex1362];
            output.append('<option value=\'', soy.$$escapeHtml(kData1362), '\' role=\'option\'', (opt_data.lane.lane.kind == kData1362) ? 'selected="selected"' : '', '>', soy.$$escapeHtml(opt_data.kinds[kData1362].name), '</option>');
          }
        } else {
          var kList1374 = soy.$$getMapKeys(opt_data.assignment.template.slide_parser['default']);
          var kListLen1374 = kList1374.length;
          for (var kIndex1374 = 0; kIndex1374 < kListLen1374; kIndex1374++) {
            var kData1374 = kList1374[kIndex1374];
            output.append('<option value=\'', soy.$$escapeHtml(kData1374), '\' role=\'option\'', (opt_data.lane.lane.kind == kData1374) ? 'selected="selected"' : '', '>', soy.$$escapeHtml(opt_data.kinds[kData1374].name), '</option>');
          }
        }
      } else {
        output.append((soy.$$getMapKeys(opt_data.kinds).length != 1 || soy.$$getMapKeys(opt_data.kinds.IF.conditions).length != 1) ? '<option  role=\'option\' selected="selected" disabled="disabled" value=\'\'>Select Analysis</option>' : '');
        if (opt_data.lane.cell_treatment.cell_line == opt_data.assignment.template.model.microscopy.valid[0] && opt_data.lane.cell_treatment.treatment_list.first.drug_list.list[0].drug_id == opt_data.assignment.template.model.microscopy.valid[1]) {
          var kList1391 = soy.$$getMapKeys(opt_data.assignment.template.slide_parser[opt_data.lane.cell_treatment.treatment_list.first.collection_id]);
          var kListLen1391 = kList1391.length;
          for (var kIndex1391 = 0; kIndex1391 < kListLen1391; kIndex1391++) {
            var kData1391 = kList1391[kIndex1391];
            output.append('<option role=\'option\' value=\'', soy.$$escapeHtml(kData1391), '\'>', soy.$$escapeHtml(opt_data.kinds[kData1391].name), '</option>');
          }
        } else {
          var kList1399 = soy.$$getMapKeys(opt_data.assignment.template.slide_parser['default']);
          var kListLen1399 = kList1399.length;
          for (var kIndex1399 = 0; kIndex1399 < kListLen1399; kIndex1399++) {
            var kData1399 = kList1399[kIndex1399];
            output.append('<option role=\'option\' value=\'', soy.$$escapeHtml(kData1399), '\'>', soy.$$escapeHtml(opt_data.kinds[kData1399].name), '</option>');
          }
        }
      }
      output.append('</select>');
    }
  }
  return opt_sb ? '' : output.toString();
};


scb_microscopy.display_m_progress = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'scb_s_microscopy_progress\'><div class=\'scb_s_microscopy_video_box_wrapper\'><div class=\'scb_s_microscopy_video_box_wrapper_title\'>IN THE LAB</div><div class=\'scb_s_microscopy_video_reminder\'><div class=\'scb_s_microscopy_video_box\'></div></div></div><div class=\'scb_s_microscopy_vertical_line_1\' role=\'presentation\' ></div><div class=\'scb_s_microscopy_vertical_line_4\' role=\'presentation\'></div><div class=\'scb_s_microscopy_vertical_line_7\' role=\'presentation\'></div><div class=\'scb_s_western_blot_progress_bar\'><div class = \'scb_s_western_blot_progress_gray_bar\' role=\'progressbar\'><div class=\'scb_s_facs_vertical_line_1_top\' role=\'presentation\'></div><div class=\'scb_s_facs_vertical_line_4_top\'role=\'presentation\'></div><div class=\'scb_s_facs_vertical_line_7_top\' ></div><div class=\'scb_s_western_blot_progress_stripe_bar\' style=\'width:', (opt_data.step == 1) ? '20px;' : '', (opt_data.step == 2) ? ' 289px;' : '', (opt_data.step == 3) ? '607px; border-top-right-radius:8px; border-bottom-right-radius:8px;' : '', '\' aria-label=\'', (opt_data.step == 1) ? 'Microscopy Prep' : '', (opt_data.step == 2) ? 'Load' : '', (opt_data.step == 3) ? 'Analyze' : '', '\' ></div></div><div class=\'scb_s_facs_progress_rest\' role=\'presentation\'><div class=\'scb_s_western_blot_progress_item scb_microscopy_progress_1\'>1. Microscopy Prep</div><div class=\'scb_s_western_blot_progress_item scb_microscopy_progress_2\'>2. Load</div><div class=\'scb_s_western_blot_progress_item scb_microscopy_progress_3\'>3. Analyze</div></div></div></div>');
  return opt_sb ? '' : output.toString();
};
